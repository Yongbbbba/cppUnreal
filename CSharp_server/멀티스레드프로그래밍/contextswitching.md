# Context Switching

내가 접근하려고 하는 데이터가 lock이 되어있으면 SpinLock의 경우는 unlock이 될 떄까지 하염없이 기다리는 방법이다. 반면에 lock이 되어있으면 잠시 다른 스레드에 CPU의 점유를 넘겨주는 방식이 존재한다. 

이때 얼마나 기다릴 것인가를 정할 수 있는데 보통 아래와 같은 방법들이 있다.

```c#
// 쉬다올게~
                Thread.Sleep(1); // 무조건 휴식 => 무조건 1ms  정도 쉬고 싶어요 (실제로 쉬는 정도는 운영체제의 스케쥴러가 결정함, 최대한 비슷하게 해주려고 노력함)
                Thread.Sleep(0); // 조건부 양보 => 나보다 우선순위가 낮은 애들한테는 양보 불가 => 우선순위가 나보다 같거나 높은 스레드가 없으면 다시 본인이 cpu를 점유함 
                Thread.Yield(); // 관대한 양보 => 관대하게 양보할테니, 지금 실행이 가능한 스레드가 있으면 실행하세요. 그때 실행가능한 스레드가 없으면 남은 시간 자기가 소진한다.
```



## 컨텍스트 스위칭의 비용

컨텍스트 스위칭의 과정은 비용을 수반하는 것이기 때문에 반드시 성능 향상을 수반하지 않는다.

컨텍스트 스위칭을 하게 되면 RAM에서 그 프로그램에 대한 정보(가령 코드의 어느 부분까지 작업을 수행했는지, 데이터는 어떤 것들을 가지고 있는지, 어떤 상태였는지 등)를 가져와야하기에 이러한 것들이 컨텍스트 스위칭의 비용이라고 볼 수 있다.

또한 가상 메모리 테이블을 바꿔줘야하는 경우도 있기 때문에 이또한 컨텍스트 스위칭의 비용이다. 

